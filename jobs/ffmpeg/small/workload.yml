workloads:
  ffmpeg-high-compression-small:
    image: registry.jakob-eberhardt.de/rdt4nn/ffmpeg/base:latest
    command: "wget https://lfs.jakob-eberhardt.de/video/10/video.mov && while :; do ffmpeg -i /data/video.mov -c:v libx265 -preset veryslow -crf 22 -c:a aac -b:a 128k -y /tmp/output.mp4; done"
    num_cores: 1
    kind: iobound
    sensitivity: high

  ffmpeg-filter-small:
    image: registry.jakob-eberhardt.de/rdt4nn/ffmpeg/base:latest
    command: "wget https://lfs.jakob-eberhardt.de/video/10/video.mov && while :; do ffmpeg -i /data/video.mov -vf 'scale=640:360,hue=s=0' -c:v libx264 -preset medium -crf 23 -c:a copy -y /tmp/output.mp4; done"
    num_cores: 1
    kind: iobound
    sensitivity: high

  ffmpeg-blur-small:
    image: registry.jakob-eberhardt.de/rdt4nn/ffmpeg/base:latest
    command: "wget https://lfs.jakob-eberhardt.de/video/10/video.mov && while :; do ffmpeg -i /data/video.mov -vf 'boxblur=10:1' -c:v libx264 -preset fast -crf 23 -c:a copy -y /tmp/output.mp4; done"
    num_cores: 1
    kind: iobound
    sensitivity: high